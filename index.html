---
title: home
layout: page
---

<input id="photo" type="file">
<div id="results"></div>
<script type="module">
  import { Client } from 'https://cdn.jsdelivr.net/npm/@gradio/client/dist/index.min.js';

  async function loaded(file) {
    try {
                
    const client = await Client.connect("kireshanth/cat-dog-classifier");
    const result = await client.predict("/predict", { 
            img: file, 
    });

    console.log(result.data)
    //const label = result.data[0]['label']
    //const confidence = result.data[0]['confidences']['label']
    const { label, confidences } = result.data[0];
    const confidence = confidences.find(c => c.label === label).confidence;

    document.getElementById('results').innerText = 'The model predicts: ' + label + ' confidence: '  + confidence;

  
  } catch (error) {
      console.error('Error:', error);
      document.getElementById('results').innerText = 'An error occurred: ' + error.message;
    } 
  }

  function read() {
    const fileInput = document.getElementById('photo');
    if (fileInput.files.length > 0) {
      const file = fileInput.files[0];
      loaded(file); // Pass the File object directly
    }
  }

  document.getElementById('photo').addEventListener('change', read);
</script>
